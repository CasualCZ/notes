<!DOCTYPE html>
<html lang="en" dir=>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Prepare #  介绍 #  目前就职于cf的运维开发岗位，主要工作内容是开发运维自动化相关工具和平台，对公司技术部门提供系统、网络、nginx、云服务相关的技术支持。 入职以来主要做了以下几件事，1、制定运维基础元数据规范，2、开发资源自动化系统，对接不同的云平台，实现资源申请到发布一键化操作。3、搭建和二次开发监控系统，实现基础资源的统一监控、展示和告警。 4、利用ngx_lua实现限源功能，防攻击脚本，对接应用平台，实现项目环境的快速搭建。  可能碰到的问题 #  项目 #  # cmdb怎么做 以应用为维度，分为三部分，第一部分是应用自己的信息，包括代码地址，代码类型、应用端口等信息，第二部分是应用归属，包括owner和部门，第三部分为资源信息，包括资源类型、环境、以及连接信息    应用 语言 git地址              应用 owner 部门              应用 环境 资源类型 资源               资源 资源类型 资源信息           # 项目亮点和难点 1、interface接口规范，接入一个云平台只需要实现对应的方式就行 2、中间逻辑失败怎么处理 分两种情况，一种属于资源未创建成功，提供3次重试，都失败返回错误 一种是资源创建成功，推送各个平台失败 对于无特殊信息(密码之类的)，记录信息，提供推送接口，手动确认报错后，调用接口推送 有特殊信息，临时文件记录，提供推送接口，手动确认报错后，调用接口推送后，删除特殊信息 # 监控系统 # 数据采集 ecs、rds、redis、lb、cdn # 阈值平台，rule-engine单独出来，定时到gateway拉取告警配置，然后拉取Prometheus接口做计算，告警推送到gateway，对用户不支持自定义指标 # 告警收敛 # ngx_lua # 限源怎么做，利用ngx_shared dict，最小计算单元，10秒，至少两个周期，ip_time(最小计算单元)， ip_time &#43; n个周期的总数，超过就deny，进来的流量先判断是否deny，deny配置过期时间 # 路由怎么做，配置泛域名，解析域名跟url，请求应用平台，取得proxy_pass返回值 # 系统优化 tcp优化 # nginx优化 传输优化 压缩优化 buffer优化 timeout优化 技术问题 #  # TCP三次握手和四次挥手 ### 三次握手 1、server端创建socket，监听某个端口，server端进入listen状态 2、client端创建socket，根据local_port_range随机选择一个未使用的端口，并生成ISN随机序列号，SYN标志位1，往server发送syn包，进入syn-sent状态 3、server端接收到数据包，若该数据包未超过sync_backlog半连接的队列大小，处理数据表，生成自己的ISN，将ack number配置为对方ISN&#43;1，将syn和ack标志位1，发送给client，进入syn-received状态 4、client接收到syn包，回复一个ack number为ISN&#43;1，ack标志位为1的数据包，进入Establish状态 5、server接收到ack包，进入accept队列(somaxconn)，复制一个socket来处理该连接，进入establish状态 ### 四次挥手 1、client发送一个FIN和ACK标志都为1的数据包，进入FIN_WAIT_1状态 2、server接收到该数据包，立即返回一个ACK包，进入CLOSE_WAIT状态，等待程序处理完，关闭连接 3、client接收到ACK包后，进入FIN_WAIT_2的状态，等待对方的FIN数据包 4、server处理完后，发送FIN包给client，进入LAST_ACK状态，等待对方的ACK包 5、client接收到FIN后，发送ACK，进入TIME_WAIT状态，等待超时进入CLOSED 6、server接收到ACK包，关闭socket 7、特殊情况，client和server同时发送FIN，即两个都进入CLOSING状态。即发送FIN后，未收到ACK，确收到对方的FIN包的时候。 # HTTP结构 # HTTP缺点 # HTTP2优势 # DNS解析过程 1、查找本地缓存，/etc/hosts 2、查找本地DNS服务器，/etc/resolv.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="Prepare" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://cctrip.github.io/notes/docs/technology/other/Interview/introduction/" />

<title>Prepare | 学而不思则罔</title>
<link rel="manifest" href="/notes/manifest.json">
<link rel="icon" href="/notes/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/notes/book.min.b3215d9d1d18d9051e7fbe8f256ff80e30f41d29073b86348e230d297b771002.css" integrity="sha256-syFdnR0Y2QUef76PJW/4DjD0HSkHO4Y0jiMNKXt3EAI=">
<script defer src="/notes/en.search.min.2bfed7c08dc21856ccbe2d2fe2aad584f9853306b795f65392bdfd0567cceafb.js" integrity="sha256-K/7XwI3CGFbMvi0v4qrVhPmFMwa3lfZTkr39BWfM6vs="></script>

<script defer src="/notes/sw.min.2ab779ae2b5d50aeddfdd9ec3d03b41a76a3dc7461eedf8a74bbc49ef33e61e8.js" integrity="sha256-Krd5ritdUK7d/dnsPQO0Gnaj3HRh7t&#43;KdLvEnvM&#43;Yeg="></script>
<link rel="alternate" type="application/rss+xml" href="https://cctrip.github.io/notes/docs/technology/other/Interview/introduction/index.xml" title="学而不思则罔" />
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body dir=>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/notes"><img src="/notes/cc.jpg" alt="Logo" /><span>学而不思则罔</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  



  
  
  
  

  
  <ul>
    
      
        <li class="book-section-flat" >
          
  
    <a href="/notes/docs/technology/" class="">技术相关</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/notes/docs/technology/system/" class="collapsed ">系统</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/notes/docs/technology/network/" class="collapsed ">网络</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/notes/docs/technology/program/" class="collapsed ">编程</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/notes/docs/technology/database/" class="collapsed ">数据库</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/notes/docs/technology/architecture/" class="collapsed ">架构</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/notes/docs/technology/cloud/" class="collapsed ">云原生</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/notes/docs/technology/bigdata/" class="collapsed ">大数据</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/notes/docs/technology/security/" class="collapsed ">安全</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/notes/docs/technology/tool/" class="collapsed ">工具</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/notes/docs/technology/other/" class="collapsed ">其他</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/notes/docs/technology/other/MyConfig/" class="collapsed ">环境配置</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/notes/docs/technology/other/Solution/" class="collapsed ">问题集锦</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/notes/docs/technology/other/Interview/" class="collapsed ">面试相关</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/notes/docs/technology/other/Interview/introduction/" class="active">Prepare</a>
  

          
  
  
  

  
  <ul>
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/notes/docs/technology/other/Interview/work/" class="">工作总结</a>
  

          
  
  
  

  
  <ul>
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/notes/docs/technology/other/Interview/tech/" class="collapsed ">技术知识点</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/notes/docs/technology/other/Interview/other/" class="">非技术相关</a>
  

          
  
  
  

  
  <ul>
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/notes/docs/technology/other/Interview/classic/" class="collapsed ">经典问题</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/notes/docs/technology/other/Interview/target/" class="">针对性</a>
  

          
  
  
  

  
  <ul>
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/notes/docs/technology/other/Interview/history/" class="collapsed ">总结</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/notes/docs/technology/other/Interview/100/" class="">100个问题</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/notes/docs/technology/other/Interview/request/" class="">目标</a>
  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/notes/docs/technology/other/BookNotes/" class="collapsed ">读书笔记</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/notes/docs/technology/other/Translate/" class="collapsed ">技术文章翻译</a>
  

          
  
  
  

  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/notes/docs/technology/howto/" class="collapsed ">How To</a>
  

          
  
  
  

  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
    <a href="/notes/docs/other/" class="">非技术相关</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/notes/docs/other/life/" class="collapsed ">人生</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/notes/docs/other/learn/" class="collapsed ">方法论</a>
  

          
  
  
  

  

        </li>
      
    
  </ul>
  

        </li>
      
    
  </ul>
  











  
<ul>
  
  <li>
    <a href="https://cctrip.github.io/" target="_blank" rel="noopener">
        关于我
      </a>
  </li>
  
  <li>
    <a href="https://cctrip.github.io/posts" target="_blank" rel="noopener">
        Blog
      </a>
  </li>
  
  <li>
    <a href="https://github.com/cctrip/notes" target="_blank" rel="noopener">
        Github
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/notes/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Prepare</strong>

  <label for="toc-control">
    
    <img src="/notes/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
    <input type="checkbox" class="hidden" id="toc-control" />
    <aside class="hidden clearfix">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#prepare">Prepare</a>
      <ul>
        <li>
          <ul>
            <li><a href="#介绍">介绍</a></li>
            <li><a href="#可能碰到的问题">可能碰到的问题</a></li>
            <li><a href="#技术问题">技术问题</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>


    </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="prepare">
  Prepare
  <a class="anchor" href="#prepare">#</a>
</h1>
<h3 id="介绍">
  介绍
  <a class="anchor" href="#%e4%bb%8b%e7%bb%8d">#</a>
</h3>
<pre><code>目前就职于cf的运维开发岗位，主要工作内容是开发运维自动化相关工具和平台，对公司技术部门提供系统、网络、nginx、云服务相关的技术支持。
入职以来主要做了以下几件事，1、制定运维基础元数据规范，2、开发资源自动化系统，对接不同的云平台，实现资源申请到发布一键化操作。3、搭建和二次开发监控系统，实现基础资源的统一监控、展示和告警。 4、利用ngx_lua实现限源功能，防攻击脚本，对接应用平台，实现项目环境的快速搭建。
</code></pre><hr>
<h3 id="可能碰到的问题">
  可能碰到的问题
  <a class="anchor" href="#%e5%8f%af%e8%83%bd%e7%a2%b0%e5%88%b0%e7%9a%84%e9%97%ae%e9%a2%98">#</a>
</h3>
<h4 id="项目">
  项目
  <a class="anchor" href="#%e9%a1%b9%e7%9b%ae">#</a>
</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-markdown" data-lang="markdown"># cmdb怎么做
以应用为维度，分为三部分，第一部分是应用自己的信息，包括代码地址，代码类型、应用端口等信息，第二部分是应用归属，包括owner和部门，第三部分为资源信息，包括资源类型、环境、以及连接信息
</code></pre></div><table>
<thead>
<tr>
<th>应用</th>
<th>语言</th>
<th>git地址</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>应用</th>
<th>owner</th>
<th>部门</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>应用</th>
<th>环境</th>
<th>资源类型</th>
<th>资源</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>资源</th>
<th>资源类型</th>
<th>资源信息</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<pre><code># 项目亮点和难点

1、interface接口规范，接入一个云平台只需要实现对应的方式就行

2、中间逻辑失败怎么处理
分两种情况，一种属于资源未创建成功，提供3次重试，都失败返回错误
一种是资源创建成功，推送各个平台失败
对于无特殊信息(密码之类的)，记录信息，提供推送接口，手动确认报错后，调用接口推送
有特殊信息，临时文件记录，提供推送接口，手动确认报错后，调用接口推送后，删除特殊信息

</code></pre><pre><code># 监控系统
# 数据采集 ecs、rds、redis、lb、cdn
# 阈值平台，rule-engine单独出来，定时到gateway拉取告警配置，然后拉取Prometheus接口做计算，告警推送到gateway，对用户不支持自定义指标
# 告警收敛
</code></pre><pre><code># ngx_lua
# 限源怎么做，利用ngx_shared dict，最小计算单元，10秒，至少两个周期，ip_time(最小计算单元)，  ip_time + n个周期的总数，超过就deny，进来的流量先判断是否deny，deny配置过期时间

# 路由怎么做，配置泛域名，解析域名跟url，请求应用平台，取得proxy_pass返回值

</code></pre><pre><code># 系统优化
	tcp优化
	
# nginx优化
	传输优化
	压缩优化
	buffer优化
	timeout优化
	
</code></pre><h3 id="技术问题">
  技术问题
  <a class="anchor" href="#%e6%8a%80%e6%9c%af%e9%97%ae%e9%a2%98">#</a>
</h3>
<pre><code># TCP三次握手和四次挥手
### 三次握手
1、server端创建socket，监听某个端口，server端进入listen状态
2、client端创建socket，根据local_port_range随机选择一个未使用的端口，并生成ISN随机序列号，SYN标志位1，往server发送syn包，进入syn-sent状态
3、server端接收到数据包，若该数据包未超过sync_backlog半连接的队列大小，处理数据表，生成自己的ISN，将ack number配置为对方ISN+1，将syn和ack标志位1，发送给client，进入syn-received状态
4、client接收到syn包，回复一个ack number为ISN+1，ack标志位为1的数据包，进入Establish状态
5、server接收到ack包，进入accept队列(somaxconn)，复制一个socket来处理该连接，进入establish状态

### 四次挥手
1、client发送一个FIN和ACK标志都为1的数据包，进入FIN_WAIT_1状态
2、server接收到该数据包，立即返回一个ACK包，进入CLOSE_WAIT状态，等待程序处理完，关闭连接
3、client接收到ACK包后，进入FIN_WAIT_2的状态，等待对方的FIN数据包
4、server处理完后，发送FIN包给client，进入LAST_ACK状态，等待对方的ACK包
5、client接收到FIN后，发送ACK，进入TIME_WAIT状态，等待超时进入CLOSED
6、server接收到ACK包，关闭socket
7、特殊情况，client和server同时发送FIN，即两个都进入CLOSING状态。即发送FIN后，未收到ACK，确收到对方的FIN包的时候。 

# HTTP结构

# HTTP缺点
# HTTP2优势

# DNS解析过程
1、查找本地缓存，/etc/hosts
2、查找本地DNS服务器，/etc/resolv.conf(递归)
3、查找根服务，.，
4、查找一级域名DNS服务器，.com.
5、查找二级域名DNS服务器，.xxx.com.
...

</code></pre><pre><code># 负载均衡
# LVS+Keepalived原理
# LVS NAT
1、prerouting接收数据包，进入input前，ipvs更改目标地址和端口，forward进入postrouting出去
2、realserver配置的网关为director的ip，将数据包发送给director，director SNAT发送给client

# LVS DR
1、prerouting接收数据包，进入input前，ipvs更改目标mac地址，讲数据包转发给realserver
2、realserver将数据包直接返回给client，(arp抑制)，主要是不发送自己的arp信息，以及发包的时候，忽略源ip信息，直接通过发出去的接口的mac地址
3、director状态机，通过标志位判断，syn，进入syn-received,ack，establish，  fin+ack， 接入LAST-ACK状态



# Nginx原理
# 健康检查(被动检查和主动)
# upstream
# 怎么查找host
# 怎么查找location
</code></pre><pre><code># Golang 并发
# Golang 内存模型
# Golang 垃圾回收
</code></pre><pre><code># k8s
# pod 与 pod 通信
# service通信
# storageclass
</code></pre></article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">



  <div><a class="flex align-center" href="https://github.com/cctrip/notes/commit/5d4de2d8e021db67279ca60787c927f7bf595131" title='Last modified by codecc | August 15, 2020' target="_blank" rel="noopener">
      <img src="/notes/svg/calendar.svg" class="book-icon" alt="Calendar" />
      <span>August 15, 2020</span>
    </a>
  </div>



  <div>
    <a class="flex align-center" href="https://github.com/cctrip/notes/edit/master/content/docs/technology/other/Interview/introduction/_index.md" target="_blank" rel="noopener">
      <img src="/notes/svg/edit.svg" class="book-icon" alt="Edit" />
      <span>Edit this page</span>
    </a>
  </div>

</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#prepare">Prepare</a>
      <ul>
        <li>
          <ul>
            <li><a href="#介绍">介绍</a></li>
            <li><a href="#可能碰到的问题">可能碰到的问题</a></li>
            <li><a href="#技术问题">技术问题</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>

</html>












